# BigData Lab Environment

–ü—Ä–æ–µ–∫—Ç –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è —É—á–µ–±–Ω–æ–π —Å—Ä–µ–¥—ã Big Data (Spark, Hive, NiFi, Python Producer).  
–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏, –≤—ã—á–∏—Å–ª—è—Ç—å —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Hive.

---

## üöÄ 1. –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
./setup.sh
```

- –°–∫–∞—á–∏–≤–∞–µ—Ç `.jar` –∏ `.nar` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏  
- –°–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `.venv`  
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`  
- –°–æ–±–∏—Ä–∞–µ—Ç Scala-–¥–∏–∞–ª–µ–∫—Ç –∏ –∫–ª–∞–¥—ë—Ç `.jar` –≤ `spark/jars/`

---

## ‚ñ∂Ô∏è 2. –ó–∞–ø—É—Å–∫ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
./run.sh
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:  
Hive, Metastore, Spark, NiFi, PostgreSQL (Metastore DB).

---

## üêç 3. –ó–∞–ø—É—Å–∫ Python-–ø—Ä–æ–¥—å—é—Å–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
./producer.sh
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –º–µ—Ç—Ä–∏–∫ –∏ –æ—Ç–ø—Ä–∞–≤–∫—É –≤ NiFi ‚Üí Hive (`raw_metrics`).

---

## ‚õî 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
./stop.sh
```

–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å—ë, —á—Ç–æ –±—ã–ª–æ –ø–æ–¥–Ω—è—Ç–æ `run.sh`.

---

## üßπ 5. –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–º–µ—Ç—Ä–∏–∫–∏ –∏ –∑–∞–ø—Ä–æ—Å—ã)

```bash
./clean.sh
```

–£–¥–∞–ª—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `nifi/metrics/` –∏ `nifi/queries/`.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bigdata/
  nifi/
    extensions/         # .nar —Ñ–∞–π–ª—ã NiFi
    jdbc/               # hive-jdbc –¥—Ä–∞–π–≤–µ—Ä
    metrics/            # –≤—Ö–æ–¥—è—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
    queries/            # SQL-–∑–∞–ø—Ä–æ—Å—ã
  spark/
    apps/               # PySpark –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    jars/               # Hive2Dialect.jar
    shit/custom_dialect # Scala-–∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –¥–∏–∞–ª–µ–∫—Ç–∞
  scripts/              # –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
  setup.sh
  run.sh
  stop.sh
  producer.sh
  clean.sh
  podman-compose.yaml
  requirements.txt
```

---

## üìò –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- Python producer —Å–æ–∑–¥–∞—ë—Ç JSON-–º–µ—Ç—Ä–∏–∫–∏ ‚Üí NiFi ‚Üí Hive (`raw_metrics`)  
- Spark job —á–∏—Ç–∞–µ—Ç `raw_metrics`, –≤—ã—á–∏—Å–ª—è–µ—Ç –æ–∫–Ω–æ *–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç*, —Å—á–∏—Ç–∞–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ  
- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `net_ratio_10m` –≤ Hive  
- Scala-–¥–∏–∞–ª–µ–∫—Ç –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã Spark –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∏—Å–∞–ª –≤ Hive —á–µ—Ä–µ–∑ JDBC  
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `setup.sh`

---

## ‚ÑπÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ë–æ–ª—å—à–∏–µ `.jar` –∏ `.nar` –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Git ‚Äî –∏—Ö —Å–∫–∞—á–∏–≤–∞–µ—Ç `setup.sh`  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π Spark JDBC Dialect –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å Hive  
- Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç Spark-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã  
- –î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è Podman –∏–ª–∏ Docker  
